<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Dashboard #Hashtags</title>
    <link rel="stylesheet" href="{{url_for('static',filename='dist/css/output.css')}}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' >
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" >
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<!--suppress JSUnresolvedLibraryURL -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
<!--suppress JSUnresolvedLibraryURL -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
    <style>
		.bg-black-alt  {
            background: #191919;
		}
		.text-black-alt  {
			color:#191919;
		}
		.border-black-alt {
			border-color: #191919;
		}
	</style>
</head>
<body class="bg-black-alt leading-normal tracking-normal ">
<!-- component -->
<svg class="pointer-events-none fixed isolate z-50 opacity-70 mix-blend-soft-light" width="100%" height="100%">
    <filter id="pedroduarteisalegend">
            <feTurbulence type="fractalNoise" baseFrequency="0.80" numOctaves="4" stitchTiles="stitch"> </feTurbulence>
    </filter>
    <rect width="100%" height="100%" filter="url(#pedroduarteisalegend)"></rect>
</svg>


<div class="container w-full mx-auto pt-20">
    <h1 class="mb-4 text-4xl text-center font-extrabold tracking-tight leading-none text-white md:text-5xl lg:text-6xl dark:text-white">Dashboard Live <span class="text-[#2bc4ff] dark:text-[#2bc4ff]">#Hashtags </span></h1>        
    
    <br>
    <div class="w-full px-4 md:px-0 md:mt-8 mb-16 text-gray-800 leading-normal">
        
        <div class="grid grid-cols-4  gap-2">
            <div class="row-auto col-start-1 col-end-1 ">
                    <div class="text-gray-500 rounded shadow-xl p-4 text-center">
                        <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="text-[#2bc4ff] w-12 h-12 mb-3 inline-block" viewBox="0 0 24 24"
                        class="w-6 h-6 text-blue-300 fill-current"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24">
                        <path
                        d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"
                        />
                    </svg>
                        <h2 class="title-font font-bold text-3xl text-white"><p id="tweets"></p></h2>
                        <span class="leading-relaxed ">Tweets analyzed</span>
                    </div>
            </div>
            <div class="row-auto col-start-2 col-end-5">
                    <div class="text-gray-500 rounded shadow-xl p-4 text-center">
                        <svg class="text-[#2bc4ff] w-12 h-12 mb-3 inline-block" style="color: rgb(43, 196, 255);" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 127.1h-58.23l9.789-58.74c2.906-17.44-8.875-33.92-26.3-36.83c-17.53-2.875-33.92 8.891-36.83 26.3L292.9 127.1H197.8l9.789-58.74c2.906-17.44-8.875-33.92-26.3-36.83c-17.53-2.875-33.92 8.891-36.83 26.3L132.9 127.1H64c-17.67 0-32 14.33-32 32C32 177.7 46.33 191.1 64 191.1h58.23l-21.33 128H32c-17.67 0-32 14.33-32 32c0 17.67 14.33 31.1 32 31.1h58.23l-9.789 58.74c-2.906 17.44 8.875 33.92 26.3 36.83C108.5 479.9 110.3 480 112 480c15.36 0 28.92-11.09 31.53-26.73l11.54-69.27h95.12l-9.789 58.74c-2.906 17.44 8.875 33.92 26.3 36.83C268.5 479.9 270.3 480 272 480c15.36 0 28.92-11.09 31.53-26.73l11.54-69.27H384c17.67 0 32-14.33 32-31.1c0-17.67-14.33-32-32-32h-58.23l21.33-128H416c17.67 0 32-14.32 32-31.1C448 142.3 433.7 127.1 416 127.1zM260.9 319.1H165.8L187.1 191.1h95.12L260.9 319.1z" fill="#2bc4ff"></path></svg>
                    <h2 class="title-font font-bold text-4xl text-white"><p id="hashtag"></p></h2>
                    <span class="visible ">#Hashtag Live</span>
                    </div>
            </div>
            <div class="col-start-1 col-end-1 ">
                <div class="text-gray-500 rounded shadow-xl p-4 text-center">
                <svg class="text-[#2bc4ff] w-12 h-12 mb-3 inline-block" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-apple" viewBox="0 0 16 16">
                        <path d="M11.182.008C11.148-.03 9.923.023 8.857 1.18c-1.066 1.156-.902 2.482-.878 2.516.024.034 1.52.087 2.475-1.258.955-1.345.762-2.391.728-2.43Zm3.314 11.733c-.048-.096-2.325-1.234-2.113-3.422.212-2.189 1.675-2.789 1.698-2.854.023-.065-.597-.79-1.254-1.157a3.692 3.692 0 0 0-1.563-.434c-.108-.003-.483-.095-1.254.116-.508.139-1.653.589-1.968.607-.316.018-1.256-.522-2.267-.665-.647-.125-1.333.131-1.824.328-.49.196-1.422.754-2.074 2.237-.652 1.482-.311 3.83-.067 4.56.244.729.625 1.924 1.273 2.796.576.984 1.34 1.667 1.659 1.899.319.232 1.219.386 1.843.067.502-.308 1.408-.485 1.766-.472.357.013 1.061.154 1.782.539.571.197 1.111.115 1.652-.105.541-.221 1.324-1.059 2.238-2.758.347-.79.505-1.217.473-1.282Z"/>
                        <path d="M11.182.008C11.148-.03 9.923.023 8.857 1.18c-1.066 1.156-.902 2.482-.878 2.516.024.034 1.52.087 2.475-1.258.955-1.345.762-2.391.728-2.43Zm3.314 11.733c-.048-.096-2.325-1.234-2.113-3.422.212-2.189 1.675-2.789 1.698-2.854.023-.065-.597-.79-1.254-1.157a3.692 3.692 0 0 0-1.563-.434c-.108-.003-.483-.095-1.254.116-.508.139-1.653.589-1.968.607-.316.018-1.256-.522-2.267-.665-.647-.125-1.333.131-1.824.328-.49.196-1.422.754-2.074 2.237-.652 1.482-.311 3.83-.067 4.56.244.729.625 1.924 1.273 2.796.576.984 1.34 1.667 1.659 1.899.319.232 1.219.386 1.843.067.502-.308 1.408-.485 1.766-.472.357.013 1.061.154 1.782.539.571.197 1.111.115 1.652-.105.541-.221 1.324-1.059 2.238-2.758.347-.79.505-1.217.473-1.282Z"/>
                      </svg>
                <h2 class="title-font font-bold text-3xl text-white"><p id="Iphone"></p></h2>
                <span class=" visible">Iphone devices</span>
                </div>
            </div>
            <div class="col-start-2 col-end-2 ">
                <div class="text-gray-500 rounded shadow-xl p-4 text-center">
                <svg class="text-[#2bc4ff] w-12 h-12 mb-3 inline-block" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-android" viewBox="0 0 16 16">
                        <path d="M2.76 3.061a.5.5 0 0 1 .679.2l1.283 2.352A8.94 8.94 0 0 1 8 5a8.94 8.94 0 0 1 3.278.613l1.283-2.352a.5.5 0 1 1 .878.478l-1.252 2.295C14.475 7.266 16 9.477 16 12H0c0-2.523 1.525-4.734 3.813-5.966L2.56 3.74a.5.5 0 0 1 .2-.678ZM5 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm6 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"/>
                      </svg>
                <h2 class="title-font font-bold text-3xl text-white"><p id="Android"></p></h2>
                <span class=" visible ">Android devices</span>
                </div>
            </div>
            <div class="col-start-3 col-end-3 ">
                <div class="text-gray-500 rounded shadow-xl p-4 text-center">
                <svg class="text-[#2bc4ff] w-12 h-12 mb-3 inline-block" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-browser-chrome" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M16 8a8.001 8.001 0 0 1-7.022 7.94l1.902-7.098a2.995 2.995 0 0 0 .05-1.492A2.977 2.977 0 0 0 10.237 6h5.511A8 8 0 0 1 16 8ZM0 8a8 8 0 0 0 7.927 8l1.426-5.321a2.978 2.978 0 0 1-.723.255 2.979 2.979 0 0 1-1.743-.147 2.986 2.986 0 0 1-1.043-.7L.633 4.876A7.975 7.975 0 0 0 0 8Zm5.004-.167L1.108 3.936A8.003 8.003 0 0 1 15.418 5H8.066a2.979 2.979 0 0 0-1.252.243 2.987 2.987 0 0 0-1.81 2.59ZM8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"/>
                      </svg>
                <h2 class="title-font font-bold text-3xl text-white"><p id="Web"></p></h2>
                <span class=" visible">Web devices</span>
                </div>
            </div>
            <div class="col-start-4 col-end-4 ">
                <div class="text-gray-500 rounded shadow-xl p-4 text-center">
                    <svg class="text-[#2bc4ff] w-12 h-12 mb-3  inline-block" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-ui-radios-grid" viewBox="0 0 16 16">
                        <path d="M3.5 15a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5zm9-9a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5zm0 9a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zM16 3.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0zm-9 9a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0zm5.5 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zm-9-11a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 2a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
                      </svg>
                <h2 class="title-font font-bold text-3xl text-white"><p id="Others"></p></h2>
                <span class="  visible">Others devices</span>
                </div>
            </div>
            <div class="col-start-1 col-end-5">
                    <blockquote class="text-white rounded shadow-xl p-4 ">
                        <p class="text-md italic font-medium visible text-white dark:text-white"><p id="text"></p>
                    </blockquote>
                    
            </div>


        </div>
        <div class=" text-gray-500 rounded shadow-xl "">
            <div class="p-5">
                <canvas id="canvas"></canvas>
            </div>
        </div>

        <hr class="border-b-1 border-[#343434] my-6 mx-3">

        <div class="grid grid-cols-2 gap-2">
            
            <div class="col-start-1 col-end-1 text-gray-500 rounded shadow-xl">
                <!--Graph Card-->
                <div class="p-4">
                    <canvas id="canvas2"></canvas>
                </div>
                <!--/Graph Card-->
            </div>
            <div class="col-start-2 col-end-2 text-gray-500 rounded shadow-xl">
                <!--Graph Card-->
                <div class="p-4">
                    <figure class="saturate-100" >
                        <img  id="wcloud" src=" " width="500" height="800" alt="WordCloud Real Time" >
                    </figure>
                        
                </div>
            </div>
       

        </div>

        <br>
        <br>
        <br>
        <br>
        <br>
                            
        <!--/ Console Content-->
                
    </div>
    

</div> 
    
<script>
   $(function () {
        const config = {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: "Live Tweets",
                    backgroundColor: '#2bc4ff',
                    borderColor: '#2bc4ff',
                    data: [],
                    fill: false,
                }],
            },
            options: {
                responsive: true,
                title: {
                    display: true,
                    text: 'Real-time arrival of tweets'
                },
                tooltips: {
                    mode: 'index',
                    intersect: false,
                },
                hover: {
                    mode: 'nearest',
                    intersect: true
                },
                scales: {
                    xAxes: [{
                        display: true,
                        scaleLabel: {
                            display: true,
                            labelString: 'Time'
                        }
                    }],
                    yAxes: [{
                        display: true,
                        scaleLabel: {
                            display: true,
                            labelString: 'Value'
                        }
                    }]
                }
            }
        };

        const context = document.getElementById('canvas').getContext('2d');

        const lineChart = new Chart(context, config);

        const source = new EventSource("/chart-data");

        source.onmessage = function (event) {
            const data = JSON.parse(event.data);
            if (config.data.labels.length === 20) {
                config.data.labels.shift();
                config.data.datasets[0].data.shift();
            }
            config.data.labels.push(data.time);
            config.data.datasets[0].data.push(data.value);
            lineChart.update();
        }
    });
</script>    

<script>

//var yValues2 = [55,49,25];
  
    
const config2 ={
    type: "doughnut",
    data: {
        labels:['positive','neutral','negative'],
        datasets: [{
            backgroundColor: ["#3efca1","#cde4db", "#e34f7b", "#F20C88"],
            data:[],
            fill: false,
            borderColor : false, 

        }]
    },
    options: {
    scales:{yAxes:[{ticks:{beginAtZero: true}}]},  
    legend: {display: true},
    title: {
        display: true,
        text: "Twitter Setiment Count"
        }
    }
};
    
        const context2 = document.getElementById('canvas2').getContext('2d');
        const barChart = new Chart(context2, config2);
        //const source = new EventSource("/chart-data");    

        const source2 = new EventSource("/bar-data");
        source2.onmessage = function (event) {
        const data2 = JSON.parse(event.data);

        var a = setInterval(function() {
        config2.data.datasets[0].data.length = [];
        config2.data.datasets[0].data.push(data2.positive, data2.neutral , data2.negative);
        barChart.update();
        clearInterval(a);  
        }, 0.1);
        

}

</script>    
    
<!--How to draw a new graph about use of devices-->
<script>
    // Set the date we're counting down to
    
    // Update the count down every 1 second
    const source9 = new EventSource('/mobil-data');
    source9.onmessage = function (event) {
        const data9 = JSON.parse(event.data);
        var y = setInterval(function() {

        document.getElementById("Iphone").innerHTML =  data9.Iphone;
        document.getElementById("Android").innerHTML =  data9.Android;
        document.getElementById("Web").innerHTML =  data9.Web;
        document.getElementById("Others").innerHTML =  data9.Others;
        clearInterval(y);
        // If the count down is finished, write some text

    }, 0.1);
        
    }

</script> 

<script>
    // Set the date we're counting down to
    
    // Update the count down every 1 second
    const source4 = new EventSource('/total-tweets');
    source4.onmessage = function (event) {
        const data4 = JSON.parse(event.data);
        var x = setInterval(function() {

        document.getElementById("tweets").innerHTML =  data4.tweetsT ;
        clearInterval(x);  
    }, 0.1);
        
    }

</script> 

<script>
    // Set the date we're counting down to
    
    // Update the count down every 1 second
    const source6 = new EventSource('/t-hashtag');
    source6.onmessage = function (event) {
        const data6 = JSON.parse(event.data);
        var z = setInterval(function() {

        document.getElementById("hashtag").textContent =  data6.hashtag ;
        clearInterval(z);  
    }, 0.1);
        
    }

</script> 

<script>
    // Set the date we're counting down to
    
    // Update the count down every 1 second
    const source5 = new EventSource('/text-tweet');
    source5.onmessage = function (event) {
        const data5 = JSON.parse(event.data);
        var y = setInterval(function() {

        document.getElementById("text").textContent =  data5.text ;
        clearInterval(y);
        // If the count down is finished, write some text

    }, 0.1);
        
    }

</script> 

<script>    
    const source10 = new EventSource("/w_words");

    source10.onmessage = function (event) {  
    //here we have the event
    const data10 = JSON.parse(event.data);
    console.log(data10)

    document.getElementById("wcloud").src = "data:image/png;base64,"+ data10.img;
    } 
  

</script>



<script src="https://unpkg.com/flowbite@1.5.3/dist/flowbite.js"></script>
</body>
</html>
